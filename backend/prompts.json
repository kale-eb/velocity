{
  "scriptGeneration": {
    "system": [
      "You are an expert script writer for successful short-form videos on instagram and tiktok.",
      "You MUST use the given product specs and extra instructions. When available, use provided video JSON analyses to guide tone, structure, and pacing. These are the videos that the user wants to reference in terms of style, pacing, and structure.",
      "Output JSON only with shape: { id, title, chunks: Chunk[] } where Chunk={ id, type:'HOOK'|'BODY'|'CTA', script_text, camera_instruction }. Use whatever type of chunk is needed to best fit the video, and multiple chunks of the same type are allowed.",
      "CRITICAL SCRIPT STRUCTURE RULES:",
      "- Each chunk represents ONE VISUAL SHOT with ONE camera instruction",
      "- Never combine multiple shots or camera angles into a single chunk",
      "- If you need multiple visual cuts, create multiple separate chunks",
      "- Each chunk = 1 video file that will be uploaded separately",
      "- Split sentences across chunks if the visual shot changes mid-sentence",
      "- Camera instructions must describe exactly ONE shot (e.g., 'Close-up of product' NOT 'Wide shot, then close-up')",
      "Generate up to 20 chunks that use the reference ads as a guide for the tone, style, and structure of the script and camera directions. You will provide very detailed camera directions for each chunk to produce the best quality video.",
      "Prefer camera directions that use more colloquial language and less technical jargon, so anyone can understand placement, angle, framing, and movement."
    ],
    "userNote": "In order to generate the best script, you will need to use the tools to get the product specs, extra instructions, and the reference ads to understand the style of the ad that the user wants."
  },
  "chatActions": {
    "system": "You are a script editor assistant. Be concise but clear - focus on essential information.\n\n**CRITICAL RULES**:\n- 1 chunk = 1 video file = 1 camera shot\n- Never combine multiple shots in one camera instruction\n- Create separate chunks for different visual shots\n\n**RESPONSE STYLE**:\n- Keep explanations to 3-4 sentences maximum when needed\n- Skip unnecessary preambles like \"I'll help you...\" or \"Let me...\"\n- No lengthy summaries after making changes\n- Be direct and action-focused\n- Example good response: \"Adding more energy to the hook. Splitting into faster cuts for dynamic pacing.\" [tools]\n- Example bad response: \"I understand you want to make the hook more engaging. Let me first analyze the current script structure and then I'll make appropriate changes to enhance the opening by considering various factors...\" [tools]\n\n**WORKFLOW**:\n1. Briefly state what you're changing (1-2 sentences)\n2. Use tools to make the changes\n3. Stop or add 1 sentence if clarification needed\n\n**CHUNK STRUCTURE**:\n- script_text: Words spoken in this visual segment\n- camera_instruction: ONE shot description (e.g., 'Close-up of product')\n\nEach chunk = one video file in the editing system."
  },
  "tools": {
    "get_product_specs": {
      "name": "get_product_specs",
      "description": "Return product information about the product being advertised.",
      "parameters": { "type": "object", "properties": {}, "additionalProperties": false }
    },
    "get_extra_instructions": {
      "name": "get_extra_instructions", 
      "description": "Return the extra instructions string (tone/CTA/target).",
      "parameters": { "type": "object", "properties": {}, "additionalProperties": false }
    },
    "get_ad_jsons": {
      "name": "get_ad_jsons",
      "description": "Return a detailed analysis of the given ad reference. This is CRUCIAL in understanding the style of ad that the user wants.",
      "parameters": {
        "type": "object",
        "properties": {
          "urls": { "type": "array", "items": { "type": "string" } }
        },
        "required": ["urls"]
      }
    },
    "rewrite_chunk": {
      "name": "rewrite_chunk",
      "description": "Edit the script text and/or camera instructions for a single chunk",
      "parameters": {
        "type": "object",
        "properties": {
          "targetId": { "type": "string", "description": "The ID of the chunk to edit" },
          "script_text": { "type": "string", "description": "New script text (optional if only updating camera instructions)" },
          "camera_instruction": { "type": "string", "description": "New camera instruction (optional if only updating script text)" }
        },
        "required": ["targetId"],
        "additionalProperties": false
      }
    },
    "add_chunk": {
      "name": "add_chunk",
      "description": "Add a new chunk before or after an existing chunk",
      "parameters": {
        "type": "object",
        "properties": {
          "position": { "type": "string", "enum": ["before", "after"], "description": "Where to place the new chunk" },
          "targetId": { "type": "string", "description": "The ID of the existing chunk to position relative to" },
          "chunk": {
            "type": "object",
            "properties": {
              "id": { "type": "string", "description": "Unique ID for the new chunk" },
              "type": { "type": "string", "enum": ["HOOK", "PRODUCT", "CTA"], "description": "Type of chunk" },
              "script_text": { "type": "string", "description": "Script text for the new chunk" },
              "camera_instruction": { "type": "string", "description": "Camera instruction for the new chunk" }
            },
            "required": ["id", "type", "script_text", "camera_instruction"],
            "additionalProperties": false
          }
        },
        "required": ["position", "targetId", "chunk"],
        "additionalProperties": false
      }
    },
    "remove_chunk": {
      "name": "remove_chunk", 
      "description": "Delete a chunk from the script",
      "parameters": {
        "type": "object",
        "properties": {
          "targetId": { "type": "string", "description": "The ID of the chunk to remove" }
        },
        "required": ["targetId"],
        "additionalProperties": false
      }
    },
    "move_chunk": {
      "name": "move_chunk",
      "description": "Move a chunk to a different position in the script",
      "parameters": {
        "type": "object", 
        "properties": {
          "targetId": { "type": "string", "description": "The ID of the chunk to move" },
          "position": { "type": "string", "enum": ["before", "after"], "description": "Where to place the moved chunk" },
          "refId": { "type": "string", "description": "The ID of the chunk to position relative to" }
        },
        "required": ["targetId", "position", "refId"],
        "additionalProperties": false
      }
    },
    "rewrite_chunks_batch": {
      "name": "rewrite_chunks_batch",
      "description": "Edit multiple chunks at once for efficiency",
      "parameters": {
        "type": "object",
        "properties": {
          "edits": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "targetId": { "type": "string", "description": "The ID of the chunk to edit" },
                "script_text": { "type": "string", "description": "New script text (optional)" },
                "camera_instruction": { "type": "string", "description": "New camera instruction (optional)" }
              },
              "required": ["targetId"],
              "additionalProperties": false
            }
          }
        },
        "required": ["edits"],
        "additionalProperties": false
      }
    },
    "add_chunks_batch": {
      "name": "add_chunks_batch",
      "description": "Add multiple chunks at once for efficiency",
      "parameters": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "position": { "type": "string", "enum": ["before", "after"], "description": "Where to place the new chunk" },
                "targetId": { "type": "string", "description": "The ID of the existing chunk to position relative to" },
                "chunk": {
                  "type": "object",
                  "properties": {
                    "id": { "type": "string", "description": "Unique ID for the new chunk" },
                    "type": { "type": "string", "enum": ["HOOK", "PRODUCT", "CTA"], "description": "Type of chunk" },
                    "script_text": { "type": "string", "description": "Script text for the new chunk" },
                    "camera_instruction": { "type": "string", "description": "Camera instruction for the new chunk" }
                  },
                  "required": ["id", "type", "script_text", "camera_instruction"],
                  "additionalProperties": false
                }
              },
              "required": ["position", "targetId", "chunk"],
              "additionalProperties": false
            }
          }
        },
        "required": ["items"],
        "additionalProperties": false
      }
    },
    "remove_chunks_batch": {
      "name": "remove_chunks_batch",
      "description": "Remove multiple chunks at once for efficiency",
      "parameters": {
        "type": "object",
        "properties": {
          "targetIds": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Array of chunk IDs to remove"
          }
        },
        "required": ["targetIds"],
        "additionalProperties": false
      }
    },
    "move_chunks_batch": {
      "name": "move_chunks_batch", 
      "description": "Move multiple chunks at once for efficiency",
      "parameters": {
        "type": "object",
        "properties": {
          "moves": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "targetId": { "type": "string", "description": "The ID of the chunk to move" },
                "position": { "type": "string", "enum": ["before", "after"], "description": "Where to place the moved chunk" },
                "refId": { "type": "string", "description": "The ID of the chunk to position relative to" }
              },
              "required": ["targetId", "position", "refId"],
              "additionalProperties": false
            }
          }
        },
        "required": ["moves"],
        "additionalProperties": false
      }
    }
  }
}